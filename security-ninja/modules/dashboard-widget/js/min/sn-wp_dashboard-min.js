jQuery(document).ready((function($){function t(t){if(!t||!dashboardData)return t;const e=t.includes("?")?"&":"?";return t+e+[`utm_source=${encodeURIComponent(dashboardData.utm_source||"security_ninja")}`,`utm_medium=${encodeURIComponent(dashboardData.utm_medium||"plugin")}`,`utm_content=${encodeURIComponent(dashboardData.utm_content||"dashboard_widget")}`,`utm_campaign=${encodeURIComponent(dashboardData.utm_campaign||"security_ninja")}`].join("&")}!async function(){const e=$("#secnin-dashboard-feed");if(e.length){e.html('<p class="loading">Loading latest posts...</p>');try{const e=await $.ajax({url:ajaxurl,type:"POST",data:{action:"secnin_fetch_rss_feed",nonce:dashboardData.nonce||"",limit:2},timeout:1e4,dataType:"json"});if(!e.success||!e.data)throw new Error(e.data||"Failed to fetch RSS feed");!function(e){const a=$("#secnin-dashboard-feed");if(!a.length)return void console.error("Feed container not found");a.empty(),a.append("<hr>");const n=$("<h3></h3>").html(`<strong>${dashboardData.headline||"Latest from WPSecurityNinja.com"}</strong>`);a.append(n);const o=$("<ul>").addClass("wp-block-latest-posts");e&&e.length>0?e.forEach((e=>{const a=$("<li>").addClass("wp-block-latest-posts__list-item"),n=$("<a>").attr("href",t(e.link)).attr("target","_blank").attr("rel","noopener noreferrer").text(e.title),r=$("<p>").text(e.excerpt).addClass("wp-block-latest-posts__excerpt");a.append(n).append(r),o.append(a)})):o.append("<li>No recent posts available</li>");a.append(o);const r=$("<a>").attr("href",t(dashboardData.blog_link)).attr("target","_blank").attr("rel","noopener noreferrer").text("Visit wpsecurityninja.com/blog/").addClass("wp-block-button__link");a.append(r)}(e.data)}catch(e){console.error("Error fetching RSS feed:",e),function(e){const a=$("#secnin-dashboard-feed");if(!a.length)return void console.error("Feed container not found");a.empty();const n=$("<div>").addClass("rss-error"),o=$("<p>").text("Unable to fetch the latest posts."),r=$("<p>").text(`Error: ${e}`).addClass("error-details"),s=$("<a>").attr("href",t(dashboardData.blog_link)).attr("target","_blank").attr("rel","noopener noreferrer").text("Visit wpsecurityninja.com/blog/").addClass("wp-block-button__link");n.append(o).append(r).append(s),a.append(n)}(e.message||"Network error")}}else console.error("Feed container not found")}()}));